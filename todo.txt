DRY up code in usermove and go

draw by rep

wrap printf.  use a socket descriptor for an fprintf.
create a socket pair for test methods and assert output.

